const BaseURL="https://ohys.seia.io/",OriginalURL="https://torrents.ohys.net/t/";let ViewList="new",ViewPage=0,ViewMode=1;function setCookie(e,t,o){let n="";if(o){const e=new Date;e.setTime(e.getTime()+24*o*60*60*1e3),n="; expires="+e.toUTCString()}document.cookie=e+"="+(t||"")+n+"; path=/"}function getCookie(e){let t=e+"=",o=document.cookie.split(";");for(var n=0;n<o.length;n++){let e=o[n];for(;" "==e.charAt(0);)if(0==(e=e.substring(1,e.length)).indexOf(t))return e.substring(t.length,e.length)}return null}function eraseCookie(e){document.cookie=e+"=; Max-Age=-99999999;"}function appendTable(e){const t=document.querySelector("#TorrentTable");let o=t.insertRow(t.rows.length),n={torrent:o.insertCell(0),resolution:o.insertCell(1),download:o.insertCell(2)};n.torrent.innerHTML=e.torrent,n.resolution.innerHTML=e.resolution,n.download.innerHTML=e.download}function clearTable(e){document.querySelector("#TorrentTable").innerHTML=e||""}function requestData(e){let t=new XMLHttpRequest;return t.open("GET",e,!1),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; Charset=utf-8"),t.send(null),4===t.readyState&&200===t.status?t.responseText:t.status}function makeRequestURI(e){let t=BaseURL+"json.php?dir="+e.dir+"&p="+e.p;return""!==e.q&&(t+="&q="+e.q),t}function makeList(e){const t=document.querySelector("#LoadmoreButton"),o=document.querySelector("#ResolutionSelector"),n=makeRequestURI({dir:document.querySelector("#DirSelector").value,p:ViewPage,q:document.querySelector("#SearchInput").value}),r=new RegExp(o.value),l=requestData(n),i=JSON.parse(l);e.clearTable&&clearTable(""),i.length<30?t.style.display="none":t.style.display="",i.forEach(function(e){const t=e.t,o=t.match(r),n='<a href="'+OriginalURL+e.a+'">Download</a>';null!==o&&appendTable({torrent:t,resolution:o,download:n})})}function downloadList(){Object.values(TorrentTable.rows).forEach(function(e,t){setTimeout(function(){window.location=e.querySelector("a").href},900+900*t)})}function switchTheme(){const e=document.querySelector("body"),t=document.querySelector("#app"),o=document.querySelector("#SearchButton"),n=document.querySelector("#LoadmoreButton");0==ViewMode?(e.style["background-color"]="#232b2b",t.style.color="lightgrey",o.style.color="lightgrey",n.style.color="lightgrey",ViewMode=1):(e.style["background-color"]="white",t.style.color="black",o.style.color="black",n.style.color="black",ViewMode=0)}function setMode(){switchTheme(),eraseCookie("nightmode"),setCookie("nightmode",0==ViewMode?"1":"0",7)}
